{"ast":null,"code":"import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      menuRef = _ref.menuRef,\n      onVisibleChange = _ref.onVisibleChange,\n      autoFocus = _ref.autoFocus;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var focusMenu = function focusMenu() {\n    var _menuRef$current, _menuRef$current$focu;\n\n    (_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : (_menuRef$current$focu = _menuRef$current.focus) === null || _menuRef$current$focu === void 0 ? void 0 : _menuRef$current$focu.call(_menuRef$current);\n    focusMenuRef.current = true;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var _menuRef$current2;\n\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        if (!focusMenuRef.current && ((_menuRef$current2 = menuRef.current) === null || _menuRef$current2 === void 0 ? void 0 : _menuRef$current2.focus)) {\n          event.preventDefault();\n          focusMenu();\n        } else {\n          handleCloseMenuAndReturnFocus();\n        }\n\n        break;\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"names":["React","KeyCode","raf","ESC","TAB","useAccessibility","_ref","visible","setTriggerVisible","triggerRef","menuRef","onVisibleChange","autoFocus","focusMenuRef","useRef","handleCloseMenuAndReturnFocus","current","_triggerRef$current","_triggerRef$current$t","_triggerRef$current$t2","_triggerRef$current$t3","focus","call","focusMenu","_menuRef$current","_menuRef$current$focu","handleKeyDown","event","_menuRef$current2","keyCode","preventDefault","useEffect","window","addEventListener","removeEventListener"],"sources":["/project/React-Flow-Automation/node_modules/rc-tabs/node_modules/rc-dropdown/es/hooks/useAccessibility.js"],"sourcesContent":["import * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport raf from \"rc-util/es/raf\";\nvar ESC = KeyCode.ESC,\n    TAB = KeyCode.TAB;\nexport default function useAccessibility(_ref) {\n  var visible = _ref.visible,\n      setTriggerVisible = _ref.setTriggerVisible,\n      triggerRef = _ref.triggerRef,\n      menuRef = _ref.menuRef,\n      onVisibleChange = _ref.onVisibleChange,\n      autoFocus = _ref.autoFocus;\n  var focusMenuRef = React.useRef(false);\n\n  var handleCloseMenuAndReturnFocus = function handleCloseMenuAndReturnFocus() {\n    if (visible && triggerRef.current) {\n      var _triggerRef$current, _triggerRef$current$t, _triggerRef$current$t2, _triggerRef$current$t3;\n\n      (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : (_triggerRef$current$t = _triggerRef$current.triggerRef) === null || _triggerRef$current$t === void 0 ? void 0 : (_triggerRef$current$t2 = _triggerRef$current$t.current) === null || _triggerRef$current$t2 === void 0 ? void 0 : (_triggerRef$current$t3 = _triggerRef$current$t2.focus) === null || _triggerRef$current$t3 === void 0 ? void 0 : _triggerRef$current$t3.call(_triggerRef$current$t2);\n      setTriggerVisible(false);\n\n      if (typeof onVisibleChange === 'function') {\n        onVisibleChange(false);\n      }\n    }\n  };\n\n  var focusMenu = function focusMenu() {\n    var _menuRef$current, _menuRef$current$focu;\n\n    (_menuRef$current = menuRef.current) === null || _menuRef$current === void 0 ? void 0 : (_menuRef$current$focu = _menuRef$current.focus) === null || _menuRef$current$focu === void 0 ? void 0 : _menuRef$current$focu.call(_menuRef$current);\n    focusMenuRef.current = true;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var _menuRef$current2;\n\n    switch (event.keyCode) {\n      case ESC:\n        handleCloseMenuAndReturnFocus();\n        break;\n\n      case TAB:\n        if (!focusMenuRef.current && ((_menuRef$current2 = menuRef.current) === null || _menuRef$current2 === void 0 ? void 0 : _menuRef$current2.focus)) {\n          event.preventDefault();\n          focusMenu();\n        } else {\n          handleCloseMenuAndReturnFocus();\n        }\n\n        break;\n    }\n  };\n\n  React.useEffect(function () {\n    if (visible) {\n      window.addEventListener('keydown', handleKeyDown);\n\n      if (autoFocus) {\n        // FIXME: hack with raf\n        raf(focusMenu, 3);\n      }\n\n      return function () {\n        window.removeEventListener('keydown', handleKeyDown);\n        focusMenuRef.current = false;\n      };\n    }\n\n    return function () {\n      focusMenuRef.current = false;\n    };\n  }, [visible]); // eslint-disable-line react-hooks/exhaustive-deps\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}