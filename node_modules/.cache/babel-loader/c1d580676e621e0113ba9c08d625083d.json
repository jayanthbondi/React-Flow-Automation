{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nimport useDestroyed from './hooks/useDestroyed';\n\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\n\nvar ActionButton = function ActionButton(props) {\n  var clickedRef = React.useRef(false);\n  var ref = React.useRef();\n  var isDestroyed = useDestroyed();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  React.useEffect(function () {\n    var timeoutId;\n\n    if (props.autoFocus) {\n      var $this = ref.current;\n      timeoutId = setTimeout(function () {\n        return $this.focus();\n      });\n    }\n\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    var close = props.close;\n\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      if (!isDestroyed()) {\n        setLoading(false);\n      }\n\n      close.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, function (e) {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n      if (!isDestroyed()) {\n        setLoading(false);\n      }\n\n      clickedRef.current = false;\n    });\n  };\n\n  var onClick = function onClick(e) {\n    var actionFn = props.actionFn,\n        close = props.close;\n\n    if (clickedRef.current) {\n      return;\n    }\n\n    clickedRef.current = true;\n\n    if (!actionFn) {\n      close();\n      return;\n    }\n\n    var returnValueOfOnOk;\n\n    if (props.emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n\n      if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        close(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n\n      if (!returnValueOfOnOk) {\n        close();\n        return;\n      }\n    }\n\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n\n  var type = props.type,\n      children = props.children,\n      prefixCls = props.prefixCls,\n      buttonProps = props.buttonProps;\n  return /*#__PURE__*/React.createElement(Button, _extends({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\n\nexport default ActionButton;","map":{"version":3,"names":["_extends","_slicedToArray","React","Button","convertLegacyProps","useDestroyed","isThenable","thing","then","ActionButton","props","clickedRef","useRef","ref","isDestroyed","_React$useState","useState","_React$useState2","loading","setLoading","useEffect","timeoutId","autoFocus","$this","current","setTimeout","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","close","apply","arguments","e","console","error","onClick","actionFn","emitEvent","quitOnNullishReturnValue","length","type","children","prefixCls","buttonProps","createElement"],"sources":["/project/React-Flow-Automation/node_modules/antd/es/_util/ActionButton.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nimport useDestroyed from './hooks/useDestroyed';\n\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\n\nvar ActionButton = function ActionButton(props) {\n  var clickedRef = React.useRef(false);\n  var ref = React.useRef();\n  var isDestroyed = useDestroyed();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  React.useEffect(function () {\n    var timeoutId;\n\n    if (props.autoFocus) {\n      var $this = ref.current;\n      timeoutId = setTimeout(function () {\n        return $this.focus();\n      });\n    }\n\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    var close = props.close;\n\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      if (!isDestroyed()) {\n        setLoading(false);\n      }\n\n      close.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, function (e) {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n      if (!isDestroyed()) {\n        setLoading(false);\n      }\n\n      clickedRef.current = false;\n    });\n  };\n\n  var onClick = function onClick(e) {\n    var actionFn = props.actionFn,\n        close = props.close;\n\n    if (clickedRef.current) {\n      return;\n    }\n\n    clickedRef.current = true;\n\n    if (!actionFn) {\n      close();\n      return;\n    }\n\n    var returnValueOfOnOk;\n\n    if (props.emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n\n      if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        close(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n\n      if (!returnValueOfOnOk) {\n        close();\n        return;\n      }\n    }\n\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n\n  var type = props.type,\n      children = props.children,\n      prefixCls = props.prefixCls,\n      buttonProps = props.buttonProps;\n  return /*#__PURE__*/React.createElement(Button, _extends({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\n\nexport default ActionButton;"],"mappings":"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"},"metadata":{},"sourceType":"module"}